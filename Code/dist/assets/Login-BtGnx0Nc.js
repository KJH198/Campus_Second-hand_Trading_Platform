import{r as p,o as v,c as m,a as s,n as i,b as r,d as b,e as y,u as f}from"./index-CPmoQu7r.js";const g={class:"login-container"},h={class:"slider"},w={class:"head"},S={class:"btn"},B={__name:"Login",setup(x){f(n=>({"5789fcf0":300}));const a=p(1),d=async()=>{const n=document.querySelector('input[name="phoneNumber"]').value,e=document.querySelector('input[name="password"]').value;try{const l=(await(await fetch("/",{method:"POST",headers:{"Content-Type":"application/json",type:"login"},body:JSON.stringify({phone_number:n,password:e})})).json()).success;alert(l?"登录成功":"登录失败")}catch(t){console.error("Error during log:",t)}},c=async()=>{const n=document.querySelector('input[name="username"]').value,e=document.querySelector('input[name="loginpassword"]').value,t=document.querySelector('input[name="phone"]').value;console.log(e);try{const u=(await(await fetch("/",{method:"POST",headers:{"Content-Type":"application/json",type:"register"},body:JSON.stringify({user_name:n,password:e,phone_number:t})})).json()).success;alert(u?"注册成功":"注册失败")}catch(o){console.error("Error during log:",o),alert("发生了意想不到的错误")}};return v(()=>{const n=document.getElementById("signinbutton"),e=document.getElementById("signupbutton");e&&e.addEventListener("click",t=>{t.preventDefault(),c()}),n&&n.addEventListener("click",t=>{t.preventDefault(),d()})}),(n,e)=>(y(),m("div",g,[s("div",h,[s("div",{class:i(a.value===1?"form":"form hidden")},e[1]||(e[1]=[r('<div class="title">欢迎<b>回来</b></div><div class="subtitle">登录你的账户</div><div class="inputf"><input type="text" placeholder="电话号码" name="phoneNumber"><span class="label">电话号码</span></div><div class="inputf"><input type="text" placeholder="密码" name="password"><span class="label">密码</span></div><button type="submit" id="signinbutton">登录</button>',5)]),2),s("div",{class:i(a.value===2?"form":"form hidden")},e[2]||(e[2]=[r('<div class="title">欢迎<b>使用</b></div><div class="subtitle">创建你的账户</div><div class="inputf"><input type="text" placeholder="用户名" name="username"><span class="label">用户名</span></div><div class="inputf"><input type="text" placeholder="密码" name="loginpassword"><span class="label">密码</span></div><div class="inputf"><input type="text" placeholder="电话" name="phone"><span class="label">电话</span></div><button type="submit" id="signupbutton">注册</button>',6)]),2),s("div",{class:i(a.value===1?"card":"card active")},[s("div",w,[e[4]||(e[4]=s("div",{class:"name"},[s("span")],-1)),e[5]||(e[5]=s("div",{class:"desc"},"高效便捷的校园二手交易平台，让闲置物品焕发新生，轻松买卖，快乐分享！",-1)),s("div",S,[e[3]||(e[3]=b(" 新用户 ? ")),s("button",{onClick:e[0]||(e[0]=t=>a.value=a.value===1?2:1)},"去注册")])])],2)])]))}};export{B as default};
